<title id="title" hx-swap-oob="true">Database</title>

{% extends "partials/database.html" %}

{% block table %}

    <div class="center-block">
        <table class="table w-full table-compact md:table-normal">
            <thead>
            <tr class="text-neutral-content">
                <th class="bg-neutral ">Owner</th>
                <th class="bg-neutral">License Plate</th>
                <th class="bg-neutral">City</th>
                <th class="bg-neutral">Effective Period</th>
                {% if not user.is_superuser %}
                    <th class="bg-neutral"></th>
                {% endif %}
            </tr>
            </thead>
            <tbody class="overflow-auto">
            {% for car in page_obj %}
                <tr class="hover">
                    <td><a href="{% url 'owner' car.owner.id %}">{{ car.owner.name }}</a></td>

                    <td>
                        <div>
                            <div class="font-bold">{{ car.license_plate.license_plate }}</div>
                            <div class="text-sm opacity-50"><a
                                    href="{% url 'car_detail' car.license_plate.model.id %}">{{ car.license_plate.model.make }} {{ car.license_plate.model.model }}</a>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div>{{ car.register_center }}</div>
                        <div class="font-bold">{{ car.register_center.city_province }}</div>
                    </td>
                    <td>{{ car.certificate_date }} - {{ car.expiry_date }}</td>
                    {% if not user.is_superuser %}
                        <td>
                            <!-- The button to open modal -->
                            <label for="my-modal-3" class="btn" hx-get="{% url 'renew-certificate' car.id %}"
                                   hx-target="#modal-content" hx-swap="innerHTML" hx-trigger="click" hx-push-url="true"
                                   hx-indicator="dots">Renew</label>
                        </td>
                    {% endif %}
                </tr>
            {% endfor %}
        </table>
    </div>
    <!-- Put this part before </body> tag -->
    <input type="checkbox" id="my-modal-3" class="modal-toggle"/>
    <div class="modal">
        <div class="modal-box relative" id="modal-content">
        </div>
    </div>
{% endblock %}